2017/4/25 ソフトウエア研究会

# gitの運用について

## プラットフォーム

- コマンドライン
  - 万国共通で全く問題なし
- Windows
  - TortoiseGit
    - 癖あり,Mac版がない
  - SourceTree
    - Windows,Mac両方ある、個人的に好きじゃない

TECHNICAL ARTSでは、TortoiseGitを使用している

## 認証方式(github)

- https
  - パスワード
- ssh
  - SSLの公開鍵方式

コマンドラインを使う人は、ssh方式が便利
パスワード認証の場合は、毎回パスワードを入力するのが面倒
パスワードを自動入力してくれるツールもある

パスワード認証の方が簡単。
SSH認証でパスフレーズを設定すると、毎回入力で面倒になる。

httpの方がcloneは速いらしい

## 設定

- 改行コード
  - LFのみに統一する
  - 自動変換機能はOFF
  - TortoiseGitはデフォルトで自動変換なので要注意
    - インストールの最初に聞かれるので必ずチェックする

- 無視するファイル
  - .gitignore
    - Unityの場合、Libraryなどよく使う名前を無視する設定にする必要がある
  - 設定は大変なので、参考にする
  - リポジトリを作る時に設定するので、後からCloneする人はあまり気にしなくて良い
  - Unityの.metaファイルはコミットしないとUnityが正常に動作しないので、無視してはいけない


## 運用

- 大文字小文字の同一視問題
  - とにかく気をつけるしかない
  - リポジトリの内部を物理的にコピーしない
  - Linuxなどでは、大文字と小文字を同一視を前提にファイルを作らない
- 文字コードの問題
  - ASCII文字だけで運用できればベスト
  - どうしても全角を使う場合は、文字コードをUTF-8にする
  - MacとWindowsでは、同じ文字でもコードが異なる場合があるので、要注意
    - できればカナはつかなわい方が良い
  - push -f は原則禁止

### pull の流れ

- ローカルに、管理外のファイルがあり、そのファイルが他の人によってコミットされているとエラーに成る
  - ローカルのファイルを削除するか、移動する
- コンフリクトした場合
  - 他人のコミットを採用する(there)、じぶんのコミットを採用する(mine)、編集する(edit)の３択


### commit

- コミットメッセージの運用ルールを決めておく
  - 修正の理由と結果をちゃんと書く
  - 一つの修正で一つのコミット
- githubは巨大なファイルはコミットできない(100MB)
  - うっかりコミットすると、Cloneやり直しになる場合があるので注意
- コミット忘れに注意
  - コミット時のログに注意する
  - ミスは完全には防げないので、自己防衛をする


### push(自分の変更をサーバーに送る)

- 最後にpullした時から、サーバーに更新があるとpushは失敗する
  - 失敗するのは仕方がない
- 「fetch & rebase」を実行する
  - pushする
- 何度か繰り返してもエラーが取れない場合はプログラマに要相談
